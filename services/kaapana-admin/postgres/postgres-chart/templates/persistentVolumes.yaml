
{{- $storage_class := .Values.global.storage_class_fast -}}
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ .Values.appName | default .Chart.Name }}-pv-claim
  namespace: "{{ ternary .Values.global.admin_namespace .Values.global.services_namespace .Values.admin }}"
  annotations:
    "helm.sh/resource-policy": keep
spec:
  storageClassName: {{ $storage_class }}
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: {{ .Values.storage | default "10Gi" }}
  #volumeName: {{ .Values.appName | default .Chart.Name }}-pv-volume
---
#TODO why not using _dynamicPeristentVolumes.tpy form kaapana library?